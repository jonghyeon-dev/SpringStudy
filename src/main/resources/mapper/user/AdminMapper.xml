<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.sarang.mapper.AdminMapper">
	<select id="searchAdminInfo" resultType="com.sarang.model.AdminVO">
		SELECT * FROM TADM00100
		WHERE 1=1
		  AND USER_ID = #{userId}
		  AND USER_PW = #{userPw}
		ORDER BY SEQ desc LIMIT #{start}, #{size}
	</select>

    <update id="updateAdminInfo" parameterType="com.sarang.model.AdminVO">
        UPDATE TADM00100 SET
            USER_ID = #{userId},
            USER_PW = #{userPw},
            CELPH = #{celph},
            EMAIL = #{email},
            CHG_DATE = DATE_FORMAT(NOW(),'%Y%m%d'),
            CHG_TIME = DATE_FORMAT(NOW(),'%H%i%s')
        WHERE SEQ = #{seq}
    </update>

    <update id="resetAdminPw" parameterType="com.sarang.model.AdminVO">
        UPDATE TADM00100 SET
            USER_PW = #{userPw},
            CHG_DATE = DATE_FORMAT(NOW(),'%Y%m%d'),
            CHG_TIME = DATE_FORMAT(NOW(),'%H%i%s')
        WHERE SEQ = #{seq}
    </update>

    <insert id="insertAdminInfo" parameterType="com.sarang.model.AdminVO">
		INSERT INTO TADM00100(
            USER_ID,
            USER_PW,
            CELPH,
            EMAIL,
            CRET_DATE,
            CRET_TIME,
            CHG_DATE,
            CHG_TIME
		)VALUE(
			#{userId},
			#{userPw},
			#{celph},
			#{email},
			DATE_FORMAT(NOW(),'%Y%m%d'),
			DATE_FORMAT(NOW(),'%H%i%s'),
			DATE_FORMAT(NOW(),'%Y%m%d'),
			DATE_FORMAT(NOW(),'%H%i%s')
		)
	</insert>
</mapper>